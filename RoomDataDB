const mongoose = require('mongoose')
const Room = require('./Room')
const uri =
    "mongodb://localhost:27017/test";


async function getUsersFromID(roomID) {
    var doc
    const client = mongoose.connect(uri)
        .then(() => console.log("Connected. Getting user list "))
        .catch(e => console.log(e));

    return await Room.find({ id: roomID},{_id:0,users:1}).then(
        (res, err) => {
            return res[0].users

        })
}
async function saveRoom(content) {
    const client = mongoose.connect(uri)
        .then(() => console.log("Connected. Saving room"))
        .catch(e => console.log(e));
    await Room.insertMany(content).then( (err) => { if (err) console.log(err); })
}

module.exports={getUsersFromID,saveRoom};